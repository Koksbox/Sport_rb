{% extends 'base.html' %}
{% load static %}

{% block title %}–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç - –°–ø–æ—Ä—Ç–ë–∞—à{% endblock %}

{% block content %}
<div class="container">
    <h1>–õ–∏—á–Ω—ã–π –∫–∞–±–∏–Ω–µ—Ç</h1>
    
    {% if not has_role %}
    <!-- –í—ã–±–æ—Ä —Ä–æ–ª–∏ -->
    <div class="card" style="max-width: 800px; margin: 2rem auto;">
        <div class="card-header">
            <h2 class="card-title">–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ –°–ø–æ—Ä—Ç–ë–∞—à!</h2>
        </div>
        <div class="card-body">
            <p style="margin-bottom: 2rem;">–ö–∞–∫ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –°–ø–æ—Ä—Ç–ë–∞—à?</p>
            
            <div class="grid grid-3">
                <div class="item-card" onclick="selectRole('athlete')" style="cursor: pointer;">
                    <div class="sport-icon">‚úÖ</div>
                    <h3>–Ø —Ö–æ—á—É –∑–∞–Ω–∏–º–∞—Ç—å—Å—è —Å–ø–æ—Ä—Ç–æ–º</h3>
                    <p>–°–ø–æ—Ä—Ç—Å–º–µ–Ω/—É—á–µ–Ω–∏–∫</p>
                </div>
                
                <div class="item-card" onclick="selectRole('parent')" style="cursor: pointer;">
                    <div class="sport-icon">üë®‚Äçüë©‚Äçüëß</div>
                    <h3>–Ø —Ä–æ–¥–∏—Ç–µ–ª—å</h3>
                    <p>–†–µ–±—ë–Ω–æ–∫ –∑–∞–Ω–∏–º–∞–µ—Ç—Å—è —Å–ø–æ—Ä—Ç–æ–º</p>
                </div>
                
                <div class="item-card" onclick="selectRole('organization')" style="cursor: pointer;">
                    <div class="sport-icon">üè¢</div>
                    <h3>–Ø –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</h3>
                    <p>–°–ø–æ—Ä—Ç–∏–≤–Ω–∞—è –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è</p>
                </div>
            </div>
        </div>
    </div>
    {% else %}
    <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ -->
    <div class="card">
        <div class="card-header">
            <h2 class="card-title">üë§ –ü—Ä–æ—Ñ–∏–ª—å</h2>
        </div>
        <div class="card-body">
            <div class="profile-info">
                <div class="profile-item">
                    <span class="profile-label">Email:</span>
                    <span class="profile-value">{{ user.email }}</span>
                </div>
                {% if user.phone %}
                <div class="profile-item">
                    <span class="profile-label">–¢–µ–ª–µ—Ñ–æ–Ω:</span>
                    <span class="profile-value">{{ user.phone }}</span>
                </div>
                {% endif %}
                {% if user.city %}
                <div class="profile-item">
                    <span class="profile-label">–ì–æ—Ä–æ–¥:</span>
                    <span class="profile-value">{{ user.city }}</span>
                </div>
                {% endif %}
                {% if user.get_full_name %}
                <div class="profile-item">
                    <span class="profile-label">–§–ò–û:</span>
                    <span class="profile-value">{{ user.get_full_name }}</span>
                </div>
                {% endif %}
            </div>
        </div>
    </div>
    
    <!-- –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è -->
    <div class="card" style="margin-top: 2rem;">
        <div class="card-header">
            <h2 class="card-title">üé≠ –í–∞—à–∏ —Ä–æ–ª–∏</h2>
        </div>
        <div class="card-body">
            <div class="roles-list">
                {% for role in user.roles.all %}
                <span class="role-badge role-{{ role.role }}">{{ role.get_role_display }}</span>
                {% empty %}
                <p style="color: var(--text-light);">–†–æ–ª–∏ –Ω–µ –Ω–∞–∑–Ω–∞—á–µ–Ω—ã</p>
                {% endfor %}
            </div>
        </div>
    </div>
    
    <!-- –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
    <div class="section-header" style="margin-top: 3rem;">
        <h2 class="section-title">–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
    </div>
    <div class="grid grid-2" style="margin-top: 1rem;">
        <a href="{% url 'frontend-organizations' %}" class="item-card">
            <div class="item-icon">üè¢</div>
            <h3 class="item-card-title">–ù–∞–π—Ç–∏ —Å–µ–∫—Ü–∏—é</h3>
            <p class="item-card-description">–ó–∞–ø–∏—Å–∞—Ç—å—Å—è –≤ —Å–ø–æ—Ä—Ç–∏–≤–Ω—É—é –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—é</p>
        </a>
        
        <a href="{% url 'frontend-events' %}" class="item-card">
            <div class="item-icon">üèÜ</div>
            <h3 class="item-card-title">–ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è</h3>
            <p class="item-card-description">–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ø—Ä–µ–¥—Å—Ç–æ—è—â–∏–µ —Å–æ–±—ã—Ç–∏—è</p>
        </a>
    </div>
    {% endif %}
</div>

<script>
function selectRole(role) {
    // –ü–µ—Ä–µ–∫–∏–¥—ã–≤–∞–µ–º –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü—É –∑–∞–ø–æ–ª–Ω–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö –¥–ª—è —Ä–æ–ª–∏
    if (role === 'athlete') {
        window.location.href = '{% url "frontend-role-setup-athlete" %}';
    } else if (role === 'coach') {
        window.location.href = '{% url "frontend-role-setup-coach" %}';
    } else if (role === 'organization') {
        window.location.href = '{% url "frontend-organization-create" %}';
    } else if (role === 'parent') {
        // –†–æ–ª—å —Ä–æ–¥–∏—Ç–µ–ª—è —Å–æ–∑–¥–∞—ë—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–±—ë–Ω–∫–∞
        alert('–†–æ–ª—å "–†–æ–¥–∏—Ç–µ–ª—å" –±—É–¥–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ–∑–¥–∞–Ω–∞ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ —Ä–µ–±—ë–Ω–∫–∞.');
    }
}
</script>
{% endblock %}
