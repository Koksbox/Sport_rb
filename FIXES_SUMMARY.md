# –°–≤–æ–¥–∫–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

## –î–∞—Ç–∞: 2025-01-19

### üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏

#### 1. –û—à–∏–±–∫–∞ 404 –Ω–∞ `/accounts/login/`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ Django —Ä–µ–¥–∏—Ä–µ–∫—Ç–∏–ª –Ω–∞ `/accounts/login/?next=/dashboard/`, –Ω–æ —Ç–∞–∫–æ–≥–æ URL –Ω–µ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–ª–æ.

**–†–µ—à–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤ `config/settings/base.py`:
  ```python
  LOGIN_URL = '/login/'
  LOGIN_REDIRECT_URL = '/dashboard/'
  LOGOUT_REDIRECT_URL = '/'
  ```

- –°–æ–∑–¥–∞–Ω view `django_login` –≤ `apps/frontend/views_auth.py` –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –≤—Ö–æ–¥–∞ —á–µ—Ä–µ–∑ —Å–µ—Å—Å–∏–∏ Django
- –î–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/accounts/login/` –≤ `apps/frontend/urls.py` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å `@login_required`
- –û–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞ –≤ `templates/frontend/auth/login.html` –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è —Å–µ—Å—Å–∏–π Django

**–§–∞–π–ª—ã:**
- `config/settings/base.py` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- `apps/frontend/views_auth.py` - –Ω–æ–≤—ã–π —Ñ–∞–π–ª —Å view –¥–ª—è –≤—Ö–æ–¥–∞
- `apps/frontend/urls.py` - –¥–æ–±–∞–≤–ª–µ–Ω –º–∞—Ä—à—Ä—É—Ç `/accounts/login/`
- `templates/frontend/auth/login.html` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ —Ñ–æ—Ä–º–∞ –≤—Ö–æ–¥–∞

#### 2. –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

**–ü—Ä–æ–±–ª–µ–º–∞:** `NOT NULL constraint failed: sports_category.sport_id`

**–ü—Ä–∏—á–∏–Ω–∞:** –ú–æ–¥–µ–ª—å `SportCategory` —Ç—Ä–µ–±—É–µ—Ç –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ –ø–æ–ª–µ `sport` (ForeignKey), –Ω–æ –∫–æ–º–∞–Ω–¥–∞ –ø—ã—Ç–∞–ª–∞—Å—å —Å–æ–∑–¥–∞—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –±–µ–∑ —Å–≤—è–∑–∏ —Å–æ —Å–ø–æ—Ä—Ç–æ–º.

**–†–µ—à–µ–Ω–∏–µ:**
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –≤ `apps/core/management/commands/load_sample_data.py`
- –¢–µ–ø–µ—Ä—å —Å–Ω–∞—á–∞–ª–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è –≤—Å–µ –≤–∏–¥—ã —Å–ø–æ—Ä—Ç–∞
- –ó–∞—Ç–µ–º –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞ —Å–æ–∑–¥–∞–µ—Ç—Å—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è —Å –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π —Å–≤—è–∑—å—é

**–ò–∑–º–µ–Ω–µ–Ω–∏—è:**
```python
# –ë—ã–ª–æ: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –±–µ–∑ —Å–≤—è–∑–∏ —Å–æ —Å–ø–æ—Ä—Ç–æ–º
category, _ = SportCategory.objects.get_or_create(name=category_name)

# –°—Ç–∞–ª–æ: —Å–æ–∑–¥–∞–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –≤–∏–¥–∞ —Å–ø–æ—Ä—Ç–∞
category, created = SportCategory.objects.get_or_create(
    sport=sport,
    name=category_name
)
```

**–§–∞–π–ª—ã:**
- `apps/core/management/commands/load_sample_data.py` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π

### ‚úÖ –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

#### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è –¢–ó

–°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `CHECKLIST_TZ.md` —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —á–µ–∫–ª–∏—Å—Ç–æ–º —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–º—É –∑–∞–¥–∞–Ω–∏—é.

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:** ~75%
- ‚úÖ –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è (Email, VK, Telegram)
- ‚úÖ –†–æ–ª–∏ –∏ –∏—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ
- ‚úÖ –ü—Ä–æ—Ñ–∏–ª—å —Å–ø–æ—Ä—Ç—Å–º–µ–Ω–∞ (–±–∞–∑–æ–≤—ã–π)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- ‚úÖ Telegram Mini App –ø–æ–¥–¥–µ—Ä–∂–∫–∞
- ‚úÖ –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å (—Å–æ–≥–ª–∞—Å–∏—è, –∞—É–¥–∏—Ç)

**–¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:** ~25%
- ‚ö†Ô∏è SMS –≤–µ—Ä–∏—Ñ–∏–∫–∞—Ü–∏—è (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏)
- ‚ö†Ô∏è –ì–æ—Å—É—Å–ª—É–≥–∏ (—Ç—Ä–µ–±—É–µ—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ –ï–°–ò–ê)
- ‚ö†Ô∏è –ú–µ–¥–∏—Ü–∏–Ω—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ UI
- ‚ö†Ô∏è –ì—Ä–∞—Ñ–∏–∫ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞ (–≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è)

### üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

#### 1. –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö

```bash
python manage.py load_sample_data
```

–¢–µ–ø–µ—Ä—å –∫–æ–º–∞–Ω–¥–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫ –∏ —Å–æ–∑–¥–∞–µ—Ç:
- –†–µ–≥–∏–æ–Ω—ã –∏ –≥–æ—Ä–æ–¥–∞
- –í–∏–¥—ã —Å–ø–æ—Ä—Ç–∞ —Å –∫–∞—Ç–µ–≥–æ—Ä–∏—è–º–∏
- –¢–µ—Å—Ç–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏
- –ú–µ—Ä–æ–ø—Ä–∏—è—Ç–∏—è

#### 2. –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É

**–ß–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É –Ω–∞ —Å–∞–π—Ç–µ:**
1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ `/login/`
2. –í–≤–µ–¥–∏—Ç–µ email –∏ –ø–∞—Ä–æ–ª—å
3. –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –±—É–¥–µ—Ç —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ `/dashboard/`

**–¢–µ—Å—Ç–æ–≤—ã–µ –∞–∫–∫–∞—É–Ω—Ç—ã:**
- `athlete1@test.ru` / `test123`
- `coach1@test.ru` / `test123`
- `parent1@test.ru` / `test123`

#### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –ø–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω –Ω–∞ `/dashboard/` –±–µ–∑ –æ—à–∏–±–æ–∫ 404.

### üîç –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –ø—Ä–æ–≤–µ—Ä–∏—Ç—å:

1. **–í—Ö–æ–¥ —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É:**
   ```bash
   # –û—Ç–∫—Ä–æ–π—Ç–µ http://127.0.0.1:8060/login/
   # –í–æ–π–¥–∏—Ç–µ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /dashboard/
   ```

2. **–î–æ—Å—Ç—É–ø –∫ –∑–∞—â–∏—â–µ–Ω–Ω—ã–º —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º:**
   ```bash
   # –ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –æ—Ç–∫—Ä—ã—Ç—å /dashboard/
   # –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Ä–µ–¥–∏—Ä–µ–∫—Ç –Ω–∞ /login/?next=/dashboard/
   # –ü–æ—Å–ª–µ –≤—Ö–æ–¥–∞ - —Ä–µ–¥–∏—Ä–µ–∫—Ç –æ–±—Ä–∞—Ç–Ω–æ –Ω–∞ /dashboard/
   ```

3. **–ó–∞–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö:**
   ```bash
   python manage.py load_sample_data --clear
   # –î–æ–ª–∂–Ω–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å—Å—è –±–µ–∑ –æ—à–∏–±–æ–∫
   ```

### üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

1. **–î–≤–æ–π–Ω–∞—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è:**
   - API –∏—Å–ø–æ–ª—å–∑—É–µ—Ç JWT —Ç–æ–∫–µ–Ω—ã (`/api/auth/login/`)
   - Frontend –∏—Å–ø–æ–ª—å–∑—É–µ—Ç —Å–µ—Å—Å–∏–∏ Django (`/accounts/login/`)
   - –û–±–∞ –º–µ—Ç–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ

2. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å:**
   - `@login_required` –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - –†–µ–¥–∏—Ä–µ–∫—Ç—ã –ø–æ—Å–ª–µ –≤—Ö–æ–¥–∞ —Ä–∞–±–æ—Ç–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `next` –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

3. **–ú–æ–¥–µ–ª—å SportCategory:**
   - –ö–∞–∂–¥–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è –ø—Ä–∏–≤—è–∑–∞–Ω–∞ –∫ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–º—É –≤–∏–¥—É —Å–ø–æ—Ä—Ç–∞
   - –û–¥–∏–Ω –≤–∏–¥ —Å–ø–æ—Ä—Ç–∞ –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–π
   - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –º–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –í—Å–µ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã
‚úÖ –°–∏—Å—Ç–µ–º–∞ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ —Ç–µ—Å—Ç–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö —Ä–∞–±–æ—Ç–∞–µ—Ç –±–µ–∑ –æ—à–∏–±–æ–∫
‚úÖ –°–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–∏–µ –¢–ó –ø—Ä–æ–≤–µ—Ä–µ–Ω–æ –∏ –∑–∞–¥–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–æ

–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ –∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é!
