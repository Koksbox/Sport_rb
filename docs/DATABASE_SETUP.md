# Настройка базы данных

## Быстрая настройка (рекомендуется)

Для полной очистки базы данных и создания тестового пользователя выполните одну команду:

```bash
python manage.py setup_fresh_db
```

Эта команда:
1. Полностью очищает базу данных
2. Загружает базовые данные (регионы, города, виды спорта)
3. Создаёт тестового пользователя с данными:
   - Email: `edgarvaliev463@xmail.com`
   - Пароль: `qwqwqw12`
   - ФИО: Валиев Эдгар Альбертович
   - Телефон: 89191597306
   - Город: Стерлитамак
   - Роли: спортсмен, родитель (с автоматически сгенерированными ID)

## Отдельные команды

### 1. Полная очистка базы данных

```bash
python manage.py reset_all_data
```

Удаляет ВСЕ данные из базы данных, включая всех пользователей.

### 2. Очистка и загрузка базовых данных (без пользователей)

```bash
python manage.py reset_db
```

Очищает данные и загружает:
- Регионы и города
- Виды спорта
- Категории мероприятий
- Примеры мероприятий

### 3. Создание тестового пользователя

```bash
python manage.py create_test_user
```

Создаёт тестового пользователя с указанными данными. Если пользователь уже существует, обновляет его данные.

## Автоматическая генерация ID ролей

При создании ролей автоматически генерируется уникальный `unique_id` (8 символов: буквы и цифры). Это происходит в методе `save()` модели `UserRole`.

## Тестовый пользователь

После выполнения `setup_fresh_db` или `create_test_user` будет создан пользователь:

- **Email:** edgarvaliev463@xmail.com
- **Пароль:** qwqwqw12
- **ФИО:** Валиев Эдгар Альбертович
- **Телефон:** 89191597306
- **Город:** Стерлитамак
- **Роли:** 
  - Спортсмен (с уникальным ID)
  - Родитель (с уникальным ID)

## Примечания

- Все команды требуют подтверждения (кроме `--force`)
- При очистке базы данных удаляются ВСЕ данные, включая пользователей
- ID ролей генерируются автоматически при создании роли
- Если роль уже существует, её ID не изменяется
