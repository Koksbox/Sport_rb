# СпортБаш - Frontend

Единая цифровая спортивная экосистема Республики Башкортостан.

## Описание

Веб-сайт создан на Django Templates с использованием HTMX для динамических обновлений. Дизайн выполнен в бело-синем стиле с спортивной тематикой.

**Важно:** Проект разделен на два отдельных приложения:
- **`apps/api`** - все API endpoints (см. `README_API_SEPARATION.md`)
- **`apps/frontend`** - веб-интерфейс пользователя

## Технологии

- **Backend**: Django 5 + DRF
- **Frontend**: Django Templates + HTMX
- **Стили**: CSS (бело-синяя тема)
- **JavaScript**: Vanilla JS + HTMX
- **База данных**: PostgreSQL или SQLite

## Структура проекта

```
templates/
├── base.html                    # Базовый шаблон
└── frontend/
    ├── index.html              # Главная страница
    ├── dashboard.html          # Личный кабинет
    ├── role_selection.html     # Выбор роли
    ├── auth/
    │   ├── login.html          # Вход
    │   └── register.html       # Регистрация
    ├── organizations/
    │   ├── list.html           # Список организаций
    │   └── create.html         # Создание организации
    └── events/
        ├── list.html           # Список мероприятий
        └── detail.html         # Детали мероприятия

static/
├── css/
│   └── main.css               # Основные стили
└── js/
    └── main.js                # JavaScript функции

apps/frontend/
├── views.py                   # Views для фронтенда
└── urls.py                    # URL маршруты
```

## Установка и запуск

1. Убедитесь, что все зависимости установлены:
```bash
pip install -r requirements.txt
```

2. Выполните миграции:
```bash
python manage.py migrate
```

3. Соберите статические файлы:
```bash
python manage.py collectstatic
```

4. Запустите сервер разработки:
```bash
python manage.py runserver
```

5. Откройте в браузере:
```
http://localhost:8000
```

## Основные страницы

### Главная страница (`/`)
- Описание платформы
- Возможности для разных ролей
- Быстрые ссылки

### Регистрация (`/register/`)
- Регистрация через Email/SMS
- Регистрация через ВКонтакте
- Регистрация через Telegram Mini App

### Вход (`/login/`)
- Вход через Email/пароль
- Вход через ВКонтакте
- Вход через Telegram Mini App

### Личный кабинет (`/dashboard/`)
- Выбор роли (если не выбрана)
- Профиль пользователя
- Быстрые действия

### Организации (`/organizations/`)
- Список одобренных организаций
- Фильтры по городу и виду спорта
- Создание новой организации

### Мероприятия (`/events/`)
- Список опубликованных мероприятий
- Фильтры по городу и виду спорта
- Регистрация на мероприятия

## API Endpoints

Фронтенд использует следующие API endpoints:

- `GET /api/organizations/` - Список организаций
- `POST /api/organizations/create/` - Создание организации
- `GET /api/events/` - Список мероприятий
- `GET /api/events/<id>/` - Детали мероприятия
- `POST /api/events/<id>/register/` - Регистрация на мероприятие
- `POST /api/auth/login/` - Вход
- `POST /api/auth/register/` - Регистрация
- `POST /api/users/select-role/` - Выбор роли

## HTMX Интеграция

Сайт использует HTMX для динамических обновлений без перезагрузки страницы:

- Формы отправляются через `hx-post` или `hx-get`
- Контент обновляется через `hx-target` и `hx-swap`
- Индикаторы загрузки автоматически показываются

Пример:
```html
<form hx-post="/api/organizations/create/" hx-target="#messages" hx-swap="innerHTML">
    ...
</form>
```

## Telegram Mini App

Сайт поддерживает работу как Telegram Mini App:

1. Проверка наличия Telegram WebApp API
2. Автоматическая авторизация через `initData`
3. Адаптация интерфейса под Telegram

## Стилизация

Дизайн выполнен в бело-синем стиле:

- **Основной цвет**: #0066CC (синий)
- **Вторичный цвет**: #E6F2FF (светло-синий)
- **Акцент**: #003D7A (темно-синий)
- **Фон**: #FFFFFF (белый)

Все стили находятся в `static/css/main.css`.

## Адаптивность

Сайт полностью адаптивен и работает на:
- Десктопах (1200px+)
- Планшетах (768px - 1199px)
- Мобильных устройствах (< 768px)

## Безопасность

- CSRF защита для всех форм
- JWT аутентификация для API
- Проверка прав доступа на сервере
- Соответствие ФЗ-152 (обработка ПДн)

## Разработка

Для разработки фронтенда:

1. Включите DEBUG режим в `settings.py`
2. Используйте `python manage.py runserver` для локальной разработки
3. Статические файлы автоматически подхватываются в режиме DEBUG

## Деплой

Для продакшена:

1. Установите `DEBUG = False` в настройках
2. Соберите статические файлы: `python manage.py collectstatic`
3. Настройте веб-сервер (Nginx/Apache) для раздачи статики
4. Настройте WSGI сервер (Gunicorn/uWSGI)

## Поддержка

При возникновении проблем:
1. Проверьте логи в `logs/django.log`
2. Убедитесь, что все миграции применены
3. Проверьте настройки базы данных
4. Убедитесь, что статические файлы доступны
